import{_ as S}from"./D13dRPPx.js";import{_ as B,P as a,v as l,z as k,x as n,J as y,K as b,L as m,B as I,M as h,y as x,N as _,O as u,Q as p,R as w,t as d}from"./CEs29ohc.js";const N={name:"Editor",data(){return{title:"",date:"",notes:[],form:{current:{text:""}},options:{fontSize:12},textareaHeight:32,defaultTextareaHeight:32,jsonDB:[]}},computed:{styleMarginBottom(){const t=window.innerHeight;return{height:(t<300?300:t-200)+"px"}},currentId(){const t=(this._.provides[a]||this.$route).params.idNotes;return t==="new"?"new":parseInt(t)-1},routerHasIndex(){return(this._.provides[a]||this.$route).query.index!==void 0},documentWidth(){return document.getElementsByTagName("html")[0].clientWidth-8*2},widthContainerSpecialBtn(){let e=50*(this.routerHasIndex?3:1);return this.documentWidth-e},widthContainerStandardBtn(){return 50*(this.routerHasIndex?3:1)},textareaWidth(){this.$nextTick(()=>{let t=this.$refs.textarea;return t===null?300:t.offsetWidth})}},mounted(){const t=localStorage.getItem("DB");t&&(this.jsonDB=JSON.parse(t));let e=this.currentId;if(e==="new")this.createNewNotesArray(),this.$refs.title.focus();else{if(this.jsonDB[e]===void 0)return this.$router.push("/overview/notes");this.$refs.textarea.focus()}this.setDefaults(),this.loadFontSize()},watch:{"$route.query.index"(){this.changeTextareaContent()},title(){this.jsonDB[this.currentId].title=this.title===""?this.getDate("day"):this.title,this.saveInLocalStorage()},notes(){this.jsonDB[this.currentId].notes=this.notes},date(){this.jsonDB[this.currentId].date=this.date,this.saveInLocalStorage()}},methods:{loadFontSize(){let t=localStorage.getItem("options");t!=null&&(t=JSON.parse(t),t.hasOwnProperty("fontSize")&&(this.options.fontSize=t.fontSize))},getDate(t,e=new Date){const o=D=>D.toString().padStart(2,"0");typeof e!="object"&&(e=new Date(e));let c=e.getTime(),r=o(e.getDate()),s=o(e.getMonth()+1),f=e.getFullYear(),i=o(e.getHours()),g=o(e.getMinutes()),v=o(e.getSeconds());switch(t){case"unix":return c;case"day&time":return`${r}.${s}.${f} ${i}:${g}:${v}`;case"day":default:return`${r}.${s}.${f}`}},setDefaults(){const t=this.jsonDB[this.currentId];t===void 0?(this.title=this.getDate("day"),this.date=this.getDate("unix"),this.notes=[]):(this.title=t.title,this.date=t.date,this.notes=t.notes)},createNewNotesArray(){const t=this.getDate("day"),e=this.getDate("unix"),o=[];this.jsonDB.push({title:t,date:e,notes:o}),this.saveInLocalStorage(),this.$router.push(`/editor/notes/${this.jsonDB.length}`)},saveInLocalStorage(){localStorage.setItem("DB",JSON.stringify(this.jsonDB))},changeTextareaContent(){let t=(this._.provides[a]||this.$route).query.index;t!==void 0&&(t=parseInt(t),this.form.current.text=this.notes[t])},addEmoji(t){let e="";switch(t){case"star":e="‚≠ê";break;case"questionMark":e="‚ùì";break;case"video":e="üé•";break;default:e=""}this.form.current.text=e+" "+this.form.current.text,this.$refs.textarea.focus()},textareaToNotes(){this.date=this.getDate("unix");let t=this.form.current.text.trim(),e=(this._.provides[a]||this.$route).params.idNotes,o=(this._.provides[a]||this.$route).query.index,c=/[0-9]:[0-9]/,r=t.match(c)!==null,s=t[0]==="@";r&&!s&&(t="@"+t),this.form.current.text="",t!==""?o!==void 0?(o=parseInt(o),this.notes[o]=t,this.$router.push(`/editor/notes/${e}`)):this.notes.push(t):this.deleteIndex(),this.saveInLocalStorage(),this.$refs.textarea.focus(),this.textareaHeight=parseInt(this.defaultTextareaHeight)},edit(t){if(t<0||t>=this.notes.length||t===parseInt((this._.provides[a]||this.$route).query.index))return;let e=(this._.provides[a]||this.$route).params.idNotes;this.$router.push(`/editor/notes/${e}?index=${t}`),this.$refs.textarea.focus(),this.textareaHeight=parseInt(this.defaultTextareaHeight)},abortEdit(){let t=(this._.provides[a]||this.$route).params.idNotes,e=(this._.provides[a]||this.$route).query.index;this.form.current.text="",this.textareaHeight=parseInt(this.defaultTextareaHeight),e!==void 0&&this.$router.push(`/editor/notes/${t}`)},deleteIndex(){let t=parseInt((this._.provides[a]||this.$route).query.index);this.notes.splice(t,1),this.abortEdit()},getValue(t){return t[0]==="@"?t.substr(1):t===""?" ":t},getLinkToWOL(t){return t=this.getValue(t),"https://wol.jw.org/de/wol/l/r10/lp-x?q="+encodeURIComponent(t)},setTextareaHeight(){let t=this.$refs["textarea-height"].offsetHeight;t>this.defaultTextareaHeight&&(this.textareaHeight=t)}}},H={id:"Editor",class:"container-content fontRaleway"},T={class:"w3-container container-theme"},$={id:"label-title",for:"title"},j={class:"container-notes w3-row",style:{margin:"24px 24px",height:"100%"}},C=["onClick"],E={key:0},z={key:1},L=["href"],q={class:"container-input"},M={id:"toolbox",class:"w3-row"},V={class:"w3-container",id:"container-textarea"};function O(t,e,o,c,r,s){const f=S;return d(),l("div",H,[k(f),n("div",T,[y(n("input",{id:"title",ref:"title",class:"font-note-title note-inputs","onUpdate:modelValue":e[0]||(e[0]=i=>r.title=i)},null,512),[[b,r.title]]),n("label",$,[r.title===""?(d(),l(m,{key:0},[I("Titel")],64)):h("",!0),r.title!==""?(d(),l(m,{key:1},[I(x(s.getDate("day&time",r.date)),1)],64)):h("",!0)])]),n("div",j,[(d(!0),l(m,null,_(r.notes,(i,g)=>(d(),l("div",{class:"w3-col m12",style:u({fontSize:r.options.fontSize+"px"})},[n("div",{class:"val-content w3-col s12",onClick:v=>s.edit(g)},[i[0]!=="@"?(d(),l("span",E,x(s.getValue(i)),1)):h("",!0),i[0]==="@"?(d(),l("span",z,[n("a",{href:s.getLinkToWOL(i),target:"_blank"},x(s.getValue(i)),9,L)])):h("",!0)],8,C)],4))),256))]),n("div",q,[n("div",M,[n("div",{class:"w3-left w3-rest container-special-btn",style:u({width:s.widthContainerSpecialBtn+"px"})},[n("button",{onClick:e[1]||(e[1]=i=>s.addEmoji("star")),class:"w3-btn w3-hover-none editor-btn"},"‚≠ê"),n("button",{onClick:e[2]||(e[2]=i=>s.addEmoji("questionMark")),class:"w3-btn w3-hover-none editor-btn"},"‚ùì"),n("button",{onClick:e[3]||(e[3]=i=>s.addEmoji("video")),class:"w3-btn w3-hover-none editor-btn"},"üé•")],4),n("div",{class:"w3-col w3-right",style:u({width:s.widthContainerStandardBtn+"px"})},[s.routerHasIndex?(d(),l("button",{key:0,onClick:e[4]||(e[4]=i=>s.deleteIndex()),class:"w3-btn w3-hover-none editor-btn"},e[12]||(e[12]=[n("i",{class:"far fa-trash-alt"},null,-1)]))):h("",!0),s.routerHasIndex?(d(),l("button",{key:1,onClick:e[5]||(e[5]=i=>s.abortEdit()),class:"w3-btn w3-hover-none editor-btn"},e[13]||(e[13]=[n("i",{class:"far fa-times-circle"},null,-1)]))):h("",!0),n("button",{onClick:e[6]||(e[6]=i=>s.textareaToNotes()),class:"w3-btn w3-hover-none editor-btn"},e[14]||(e[14]=[n("i",{class:"fas fa-level-up-alt"},null,-1)]))],4)]),n("div",V,[y(n("textarea",{"onUpdate:modelValue":e[7]||(e[7]=i=>r.form.current.text=i),ref:"textarea",onKeyup:[e[8]||(e[8]=p(w(i=>s.textareaToNotes(),["ctrl","prevent"]),["enter"])),e[9]||(e[9]=p(w(i=>s.textareaToNotes(),["exact","prevent"]),["91","enter"])),e[10]||(e[10]=p(w(i=>s.abortEdit(),["exact"]),["esc"])),e[11]||(e[11]=i=>s.setTextareaHeight())],class:"note-inputs",style:u({resize:"none",height:r.textareaHeight+"px"})},null,36),[[b,r.form.current.text]])])]),n("div",{class:"container-margin-bottom-safari",style:u([s.styleMarginBottom,{background:"transparent"}])},"¬† ",4),n("div",{id:"container-textarea-height",ref:"textarea-height",class:"w3-container note-inputs",style:u({position:"fixed",visibility:"hidden",width:s.textareaWidth+"px"})},x(r.form.current.text),5)])}const F=B(N,[["render",O],["__scopeId","data-v-6eb12e81"]]);export{F as default};
